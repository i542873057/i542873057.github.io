{"title":".net使用jenkins搭建自动化部署时遇到的一些问题","date":"2019-03-02T03:07:55.000Z","thumbnail":"./thumbnail/post4.png","slug":"post4","tags":["C#"],"updated":"2019-03-03T04:44:06.651Z","content":"<h1 id=\"问题1-提示-TypeScriptEffectiveToolsVersion-’-gt-‘-LastKnownTypeScriptVersion-’-”中对计算结果为“”而不是数字\">问题1 提示$(TypeScriptEffectiveToolsVersion)’ &gt; ‘$(LastKnownTypeScriptVersion)’ ”中对计算结果为“”而不是数字<a href=\"post/post4#问题1-提示-TypeScriptEffectiveToolsVersion-’-gt-‘-LastKnownTypeScriptVersion-’-”中对计算结果为“”而不是数字\"></a></h1><h4 id=\"详细错误信息：\">详细错误信息：<a href=\"post/post4#详细错误信息：\"></a></h4><blockquote>\n<p>F:\\Jenkins\\MSBuild\\Microsoft\\VisualStudio\\v15.0\\TypeScript\\Microsoft.TypeScript.targets(40,35): error MSB4086: 尝试在条件“’$(TypeScriptEffectiveToolsVersion)’ != ‘’ AND !Exists(‘$(TypeScriptSdkDir)\\$(TypeScriptEffectiveToolsVersion)\\tsc.exe’) AND [F:\\Jenkins\\workspace\\HbAssess\\HbAssess.Web\\HbAssess.Web.csproj]<br>F:\\Jenkins\\MSBuild\\Microsoft\\VisualStudio\\v15.0\\TypeScript\\Microsoft.TypeScript.targets(40,35): error MSB4086:       ‘$(TypeScriptEffectiveToolsVersion)’ &gt; ‘$(LastKnownTypeScriptVersion)’ ”中对计算结果为“”而不是数字的“$(LastKnownTypeScriptVersion)”进行数值比较。 [F:\\Jenkins\\workspace\\HbAssess\\HbAssess.Web\\HbAssess.Web.csproj]</p>\n</blockquote>\n<div class=\"article-img\"><p><img src=\"https://upload-images.jianshu.io/upload_images/8084902-8460c0a23729cafd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"错误信息截图\" data-zoomable></p></div>\n<h4 id=\"解决方法：\">解决方法：<a href=\"post/post4#解决方法：\"></a></h4><p>这个错误信息是因为没有安装TypeScript SDK导致，打开自己项目的csproj然后找到TypeScriptToolsVersion标签中显示的版本，然后百度搜索一下对应版本的SDK下载下来安装即可<br><img src=\"https://upload-images.jianshu.io/upload_images/8084902-ddcbe6484f685a48.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"项目中的版本\"><br>我为了方便，我直接下载的VS2017安装文件然后在单个组件中选择对应的版本安装即可<br><img src=\"https://upload-images.jianshu.io/upload_images/8084902-420e67de93404ef1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"vs中安装\"></p>\n<h1 id=\"问题2-提示未找到“GetReferenceNearestTargetFrameworkTask”任务。请检查下列各项\">问题2 提示未找到“GetReferenceNearestTargetFrameworkTask”任务。请检查下列各项<a href=\"post/post4#问题2-提示未找到“GetReferenceNearestTargetFrameworkTask”任务。请检查下列各项\"></a></h1><h4 id=\"详细错误信息：-1\">详细错误信息：<a href=\"post/post4#详细错误信息：-1\"></a></h4><blockquote>\n<p>项目“F:\\Jenkins\\workspace\\HbAssess\\HbAssess.Web\\HbAssess.Web.csproj”在节点 1 上(Rebuild 个目标)。<br>F:\\Jenkins\\MSBuild\\15.0\\Bin\\amd64\\Microsoft.Common.CurrentVersion.targets(1603,5): error MSB4036: 未找到“GetReferenceNearestTargetFrameworkTask”任务。请检查下列各项: 1.)项目文件中的任务名称与任务类的名称相同。2.)任务类为“public”且实现 Microsoft.Build.Framework.ITask 接口。3.)在项目文件中或位于“F:\\Jenkins\\MSBuild\\15.0\\Bin\\amd64”目录的 *.tasks 文件中使用 <usingtask> 正确声明了该任务。 [F:\\Jenkins\\workspace\\HbAssess\\HbAssess.Web\\HbAssess.Web.csproj]<br>已完成生成项目“F:\\Jenkins\\workspace\\HbAssess\\HbAssess.Web\\HbAssess.Web.csproj”(Rebuild 个目标)的操作 - 失败。<br><img src=\"https://upload-images.jianshu.io/upload_images/8084902-5c17120a74060946.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"错误信息\"></usingtask></p>\n</blockquote>\n<h4 id=\"解决方法：-1\">解决方法：<a href=\"post/post4#解决方法：-1\"></a></h4><p>这个问题我刚开始也不知道，后来在StackOverFlow上面找到了对应的解决方案，说是由于没有安装对应的Nuget包管理器，所以提示该问题，直接在Vs安装工具中安装对应工具即可如图所示：<br><img src=\"https://upload-images.jianshu.io/upload_images/8084902-bb5c73b2d76eebfa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"image.png\"></p>\n<h1 id=\"问题3-msdeploy-error-ERROR-CERTIFICATE-VALIDATION-FAILED-Web-部署任务失败。\">问题3 msdeploy error ERROR_CERTIFICATE_VALIDATION_FAILED: Web 部署任务失败。<a href=\"post/post4#问题3-msdeploy-error-ERROR-CERTIFICATE-VALIDATION-FAILED-Web-部署任务失败。\"></a></h1><h4 id=\"详细错误信息：-2\">详细错误信息：<a href=\"post/post4#详细错误信息：-2\"></a></h4><blockquote>\n<p>C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\MSBuild\\Microsoft\\VisualStudio\\v15.0\\Web\\Microsoft.Web.Publishing.targets(4292,5): msdeploy error ERROR_CERTIFICATE_VALIDATION_FAILED: Web 部署任务失败。 (已使用指定的进程(“Web Management Service”)连接到远程计算机(“127。0。0。1”)，但未能验证服务器的证书。如果你信任该服务器，请再次连接并允许不信任的证书。  在以下位置了解更多信息: <a href=\"http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_CERTIFICATE_VALIDATION_FAILED。\" target=\"_blank\" rel=\"noopener\">http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_CERTIFICATE_VALIDATION_FAILED。</a>) [F:\\Jenkins\\workspace\\HbAssess\\HbAssess.Web\\HbAssess.Web.csproj]<br>  部署发布失败。<br>已完成生成项目“F:\\Jenkins\\workspace\\HbAssess\\HbAssess.Web\\HbAssess.Web.csproj”(Rebuild 个目标)的操作 - 失败。</p>\n</blockquote>\n<h4 id=\"解决方法：-2\">解决方法：<a href=\"post/post4#解决方法：-2\"></a></h4><p>在配置中的 ——&gt;构建中加一个参数（允许未信任的证书）<br>/p:AllowUntrustedCertificate=True<br><img src=\"https://upload-images.jianshu.io/upload_images/8084902-98159cda695dd95b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"image.png\"></p>\n","prev":{"title":"C#程序员又新添帮手:能更方便的在浏览器上运行C#代码啦","slug":"post3"},"next":{"title":"ECharts如何制作省份地图并在地图上显示自定义图标","slug":"post2"},"link":"https://i542873057.github.io/post/post4/","toc":[{"title":"问题1 提示$(TypeScriptEffectiveToolsVersion)’ &gt; ‘$(LastKnownTypeScriptVersion)’ ”中对计算结果为“”而不是数字","id":"问题1-提示-TypeScriptEffectiveToolsVersion-’-gt-‘-LastKnownTypeScriptVersion-’-”中对计算结果为“”而不是数字","index":"1"},{"title":"问题2 提示未找到“GetReferenceNearestTargetFrameworkTask”任务。请检查下列各项","id":"问题2-提示未找到“GetReferenceNearestTargetFrameworkTask”任务。请检查下列各项","index":"2"},{"title":"问题3 msdeploy error ERROR_CERTIFICATE_VALIDATION_FAILED: Web 部署任务失败。","id":"问题3-msdeploy-error-ERROR-CERTIFICATE-VALIDATION-FAILED-Web-部署任务失败。","index":"3"}],"reward":true,"copyright":{"author":"Jianan Shao","license":"邵佳楠的个人博客","published":"2019年3月2日","link":"<a href=\"https://i542873057.github.io/post/post4/\" title=\".net使用jenkins搭建自动化部署时遇到的一些问题\">https://i542873057.github.io/post/post4/</a>"}}